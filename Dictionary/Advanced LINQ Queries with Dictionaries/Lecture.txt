Advanced LINQ Queries with Dictionaries in C#
This updated lesson will delve deeper into LINQ (Language Integrated Query) capabilities when working with dictionaries in C#. We'll focus on advanced operations such as grouping and combining various LINQ queries to perform more complex data manipulations.

Objectives
Explore advanced LINQ operations like GroupBy.
Combine multiple LINQ methods for sophisticated data querying.
Apply these techniques to Dictionary<TKey, TValue> collections.
1. Introduction to Advanced LINQ with Dictionaries
LINQ provides advanced querying capabilities that go beyond simple transformation, filtering, and sorting. Operations like grouping can provide significant insights into the data structure.

2. Grouping Items with LINQ
GroupBy is a powerful method used to group items in a collection based on a specified key.

Example: Grouping Dictionary Items
Suppose you have a dictionary representing fruits and their respective categories.

Dictionary<string, string> fruitsCategory = new Dictionary<string, string>
{
    { "Apple", "Tree" },
    { "Banana", "Herb" },
    { "Cherry", "Tree" },
    { "Strawberry", "Bush" },
    { "Raspberry", "Bush" }
};


Using GroupBy
var groupedFruits = fruitsCategory.GroupBy(kpv => kpv.Value);


foreach (var group in groupedFruits)
{
    Console.WriteLine($"Category: {group.Key}");
    foreach (var fruit in group)
    {
        Console.WriteLine($" - {fruit.Key}");
    }
}


3. Combining LINQ Queries
LINQ queries can be combined to perform filtering, sorting, and transformation in a single statement.

Example: Filtering, Sorting, and Transforming
var sortedFilteredFruits = fruitBasket
    .Where(kpv => kpv.Value > 3)
    .OrderBy(kpv => kpv.Key)
    .Select(kv => new { kpv.Key, kpv.Value });


foreach (var fruit in sortedFilteredFruits)
{
    Console.WriteLine($"Fruit: {fruit.Key}, Quantity: {fruit.Value}");
}


4. Full Example Code
Here's the complete example incorporating GroupBy and combined LINQ queries:

using System;
using System.Collections.Generic;
using System.Linq;


class Program
{
    static void Main()
    {
        // Dictionary for grouping
        Dictionary<string, string> fruitsCategory = new Dictionary<string, string>
        {
            { "Apple", "Tree" },
            { "Banana", "Herb" },
            { "Cherry", "Tree" },
            { "Strawberry", "Bush" },
            { "Raspberry", "Bush" }
        };


        // Grouping fruits by category
        var groupedFruits = fruitsCategory.GroupBy(kpv => kpv.Value);
        foreach (var group in groupedFruits)
        {
            Console.WriteLine($"Category: {group.Key}");
            foreach (var fruit in group)
            {
                Console.WriteLine($" - {fruit.Key}");
            }
        }


        // Another Dictionary for combined queries
        Dictionary<string, int> fruitBasket = new Dictionary<string, int>
        {
            { "Apple", 5 },
            { "Banana", 2 },
            { "Orange", 7 }
        };


        // Combined LINQ queries
        var sortedFilteredFruits = fruitBasket
            .Where(kpv => kpv.Value > 3)
            .OrderBy(kpv => kpv.Key)
            .Select(kpv => new { kpv.Key, kpv.Value });

        Console.WriteLine("\nSorted and Filtered Fruits:");
        foreach (var fruit in sortedFilteredFruits)
        {
            Console.WriteLine($"Fruit: {fruit.Key}, Quantity: {fruit.Value}");
        }

        Console.ReadKey();
    }
}

Conclusion
Advanced LINQ queries with dictionaries in C# can significantly enhance data querying capabilities. Using operations like GroupBy and combining multiple queries allows for efficient and powerful data manipulation, crucial for complex data processing tasks.